{% extends "pages/base.html" %}
{% load static %}

{% block title %} Inicio {% endblock %}

{% block content %}
<article>
    <!-- TopicSection -->
    <section class="topics" id="topics" aria-labelledby="topic-label">
        <div class="container">

            <h2 class="headline headline-2 section-title">
                <span class="span">Whats New?</span>
            </h2>

            <div class="card topic-card">

                <div class="card-content">

                    <h2 class="headline headline-2 section-title card-title" id="topic-label">
                        Hot topics
                    </h2>

                    <p class="card-text">
                        Don't miss out on the latest news about Travel tips, Hotels review, Food guide...
                    </p>

                    <div class="btn-group">
                        <button class="btn-icon" aria-label="previous" data-slider-prev>
                            <ion-icon name="arrow-back" aria-hidden="true"></ion-icon>
                        </button>

                        <button class="btn-icon" aria-label="next" data-slider-next>
                            <ion-icon name="arrow-forward" aria-hidden="true"></ion-icon>
                        </button>
                    </div>

                </div>

                <div class="slider" data-slider>
                    <ul class="slider-list" data-slider-container>

                        <li class="slider-item">
                            <a href="#" class="slider-card">

                                <figure class="slider-banner img-holder" style="--width: 507; --height: 618;">
                                    <img src="{% static 'images/topic-1.jpg' %}" width="507" height="618" loading="lazy"
                                        alt="Sport" class="img-cover">
                                </figure>

                                <div class="slider-content">
                                    <span class="slider-title">Relax</span>

                                    <p class="slider-subtitle">38 Articles</p>
                                </div>

                            </a>
                        </li>

                        <li class="slider-item">
                            <a href="#" class="slider-card">

                                <figure class="slider-banner img-holder" style="--width: 507; --height: 618;">
                                    <img src="{% static 'images/topic-2.jpeg' %}" width="507" height="618"
                                        loading="lazy" alt="Travel" class="img-cover">
                                </figure>

                                <div class="slider-content">
                                    <span class="slider-title">Travel</span>

                                    <p class="slider-subtitle">63 Articles</p>
                                </div>

                            </a>
                        </li>

                        <li class="slider-item">
                            <a href="#" class="slider-card">

                                <figure class="slider-banner img-holder" style="--width: 507; --height: 618;">
                                    <img src="{% static 'images/topic-3.jpeg' %}" width="507" height="618"
                                        loading="lazy" alt="Design" class="img-cover">
                                </figure>

                                <div class="slider-content">
                                    <span class="slider-title">Design</span>

                                    <p class="slider-subtitle">78 Articles</p>
                                </div>

                            </a>
                        </li>

                        <li class="slider-item">
                            <a href="#" class="slider-card">

                                <figure class="slider-banner img-holder" style="--width: 507; --height: 618;">
                                    <img src="{% static 'images/topic-4.jpeg' %}" width="507" height="618"
                                        loading="lazy" alt="Movie" class="img-cover">
                                </figure>

                                <div class="slider-content">
                                    <span class="slider-title">Net-Working</span>

                                    <p class="slider-subtitle">125 Articles</p>
                                </div>

                            </a>
                        </li>

                        <li class="slider-item">
                            <a href="#" class="slider-card">

                                <figure class="slider-banner img-holder" style="--width: 507; --height: 618;">
                                    <img src="{% static 'images/topic-5.jpg' %}"" width=" 507" height="618"
                                        loading="lazy" alt="Lifestyle" class="img-cover">
                                </figure>

                                <div class="slider-content">
                                    <span class="slider-title">Lifestyle</span>

                                    <p class="slider-subtitle">78 Articles</p>
                                </div>

                            </a>
                        </li>

                    </ul>
                </div>

            </div>
        </div>
    </section>
    <!-- TopicSectionEnds -->

    <!-- FeaturedSection -->
    <section class="section feature" aria-label="feature" id="featured">


        <div class="container">

            <h2 class="headline headline-2 section-title">
                <span class="span">Principal Posts</span>
            </h2>

            <p class="section-text">
                Featured and highly rated articles
            </p>

            <ul class="feature-list">
                {% for articulo in articulos_generales %}
                <li>
                    <div class="card feature-card">
                        {% if articulo.imagen_portada %}
                        <figure class="card-banner img-holder" style="--width: 1602; --height: 903;">
                            <img src="{{ articulo.imagen_portada.url }}" width="1602" height="903" loading="lazy"
                                alt="{{ articulo.titulo }}" class="img-cover">
                        </figure>
                        {% endif %}
                        <div class="card-content">
                            <div class="card-wrapper">
                                <div class="card-tag">
                                    <a href="#" class="span hover-2"># {{ articulo.categoria.nombre }}</a>
                                </div>
                                <div class="wrapper">
                                    <ion-icon name="time-outline" aria-hidden="true"></ion-icon>
                                    <span class="span">{{ articulo.fecha_creacion|timesince }}</span>
                                </div>
                            </div>

                            <h3 class="headline headline-3">
                                <a href="#" class="card-title hover-2">
                                    {{ articulo.contenido|truncatewords:10 }}
                                </a>
                            </h3>

                            <div class="card-wrapper">
                                <div class="profile-card">
                                    {% if articulo.autor.imagen_perfil %}
                                    <img src="{{ articulo.autor.imagen_perfil.url }}" width="48" height="48"
                                        loading="lazy" alt="{{ articulo.autor.username }}" class="profile-banner">
                                    {% else %}
                                    <img src="{% static 'images/default-profile.png' %}" width="48" height="48"
                                        loading="lazy" alt="Sin imagen" class="profile-banner">
                                    {% endif %}
                                    <div>
                                        <p class="card-title">{{ articulo.autor.username }}</p>
                                        <p class="card-subtitle">{{ articulo.fecha_creacion|date:"d M Y" }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                {% empty %}
                <p>No hay artículos publicados aún.</p>
                {% endfor %}
            </ul>
            <a href="#" class="btn btn-secondary">
                <span class="span">Show More Posts</span>

                <ion-icon name="arrow-forward" aria-hidden="true"></ion-icon>
            </a>
        </div>
    </section>
    <!-- FeaturedSectionEnds -->

    <!-- TagSection -->
    <section class="tags" aria-labelledby="tag-label">
        <div class="container">
            <h2 class="headline headline-2 section-title" id="tag-label">
                <span class="span">Recent Tags</span>
            </h2>
            <ul class="grid-list">
                {% for categoria in categorias %}
                <li>
                    <a href="?categoria={{ categoria.id_categoria }}"
                        class="card tag-btn {% if categoria.id_categoria == categoria_activa %}active-tag{% endif %}">
                        <p class="btn-text">{{ categoria.nombre }}</p>
                    </a>


                </li>
                {% endfor %}
            </ul>
        </div>
    </section>
    <!-- TagSectionEnds -->

    <!-- filterTags -->
    {% if categoria_activa %}
    <section id="articulos-filtrados" class="glass-container">
        <h2 class="headline headline-2 section-title">
            <span class="span">Artículos de: {{ categoria_nombre }}</span>
        </h2>

        {% if articulos_filtrados %}
        <ul class="grid-list">
            {% for articulo in articulos_filtrados %}
            <li>
                <article class="filter-card">
                    <div class="card-image-wrapper">
                        {% if articulo.imagen_portada %}
                        <img src="{{ articulo.imagen_portada.url }}" alt="{{ articulo.titulo }}" class="card-image">
                        {% else %}
                        <div class="card-image placeholder"></div>
                        {% endif %}
                        <span class="card-category">#{{ articulo.categoria.nombre }}</span>
                    </div>

                    <div class="card-body">
                        <h3 class="card-title">{{ articulo.titulo }}</h3>
                        <p class="card-excerpt">{{ articulo.contenido|truncatewords:25 }}</p>

                        <div class="card-footer">
                            <div class="author-info">
                                {% if articulo.autor.imagen_perfil %}
                                <img src="{{ articulo.autor.imagen_perfil.url }}" alt="{{ articulo.autor.username }}"
                                    class="author-avatar">
                                {% else %}
                                <img src="{% static 'images/default-profile.png' %}" alt="Sin imagen"
                                    class="author-avatar">
                                {% endif %}
                                <div>
                                    <p class="author-name">{{ articulo.autor.username }}</p>
                                    <p class="publish-date">{{ articulo.fecha_creacion|date:"d M Y" }}</p>
                                </div>
                            </div>
                            <span class="time-since">{{ articulo.fecha_creacion|timesince }}</span>
                        </div>
                    </div>
                </article>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="section-text">No hay artículos en esta categoría.</p>
        {% endif %}
    </section>
    {% endif %}
    <!-- filterTagsEnds -->

    <!-- RecentPostSection -->
    <section class="section recent-post" id="recent" aria-labelledby="recent-label">
        <div class="container">

            <div class="post-main">

                <h2 class="headline headline-2 section-title">
                    <span class="span">Recent posts</span>
                </h2>

                <p class="section-text">
                    Don't miss the latest trends
                </p>

                <ul class="grid-list">
                    {% for articulo in articulos_generales %}
                    <li>
                        <div class="recent-post-card">

                            {% if articulo.imagen_portada %}
                            <figure class="card-banner img-holder" style="--width: 271; --height: 258;">
                                <img src="{{ articulo.imagen_portada.url }}" width="271" height="258" loading="lazy"
                                    alt="{{ articulo.titulo }}" class="img-cover">
                            </figure>
                            {% endif %}

                            <div class="card-content">

                                <a href="#" class="card-badge">{{ articulo.categoria.nombre }}</a>

                                <h3 class="headline headline-3 card-title">
                                    <a href="*" class="link hover-2">
                                        {{ articulo.titulo }}
                                    </a>
                                </h3>

                                <p class="card-text">
                                    {{ articulo.contenido|truncatewords:20 }}
                                </p>

                                <div class="card-wrapper">
                                    <div class="card-tag">
                                        <a href="#" class="span hover-2"># {{ articulo.categoria.nombre }}</a>
                                    </div>

                                    <div class="wrapper">
                                        <ion-icon name="time-outline" aria-hidden="true"></ion-icon>
                                        <span class="span">{{ articulo.fecha_creacion|timesince }}</span>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </li>
                    {% empty %}
                    <li>
                        <p>No hay artículos publicados aún.</p>
                    </li>
                    {% endfor %}
                </ul>
                <nav aria-label="pagination" class="pagination">

                    <a href="#" class="pagination-btn" aria-label="previous page">
                        <ion-icon name="arrow-back" aria-hidden="true"></ion-icon>
                    </a>

                    <a href="#" class="pagination-btn">1</a>
                    <a href="#" class="pagination-btn">2</a>
                    <a href="#" class="pagination-btn">3</a>
                    <a href="#" class="pagination-btn" aria-label="more page">...</a>

                    <a href="#" class="pagination-btn" aria-label="next page">
                        <ion-icon name="arrow-forward" aria-hidden="true"></ion-icon>
                    </a>

                </nav>
            </div>

            <div class="post-aside grid-list">
                <!-- popularPosts -->
                <div class="card aside-card">

                    <h3 class="headline headline-2 aside-title">
                        <span class="span">Popular Posts</span>
                    </h3>

                    <ul class="popular-list">

                        <li>
                            <div class="popular-card">

                                <figure class="card-banner img-holder" style="--width: 64; --height: 64;">
                                    <img src="{% static 'images/popular-post-1.jpg' %}" width="64" height="64"
                                        loading="lazy" alt="Creating is a privilege but it’s also a gift"
                                        class="img-cover">
                                </figure>

                                <div class="card-content">

                                    <h4 class="headline headline-4 card-title">
                                        <a href="#" class="link hover-2">Creating is a privilege but it’s also a
                                            gift</a>
                                    </h4>

                                    <div class="warpper">
                                        <p class="card-subtitle">15 mins read</p>

                                        <time class="publish-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>

                                </div>

                            </div>
                        </li>

                        <li>
                            <div class="popular-card">

                                <figure class="card-banner img-holder" style="--width: 64; --height: 64;">
                                    <img src="{% static 'images/popular-post-2.jpg' %}" width="64" height="64"
                                        loading="lazy" alt="Being unique is better than being perfect"
                                        class="img-cover">
                                </figure>

                                <div class="card-content">

                                    <h4 class="headline headline-4 card-title">
                                        <a href="#" class="link hover-2">Being unique is better than being perfect</a>
                                    </h4>

                                    <div class="warpper">
                                        <p class="card-subtitle">15 mins read</p>

                                        <time class="publish-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>

                                </div>

                            </div>
                        </li>

                        <li>
                            <div class="popular-card">

                                <figure class="card-banner img-holder" style="--width: 64; --height: 64;">
                                    <img src="{% static 'images/popular-post-3.jpg' %}" width="64" height="64"
                                        loading="lazy" alt="Every day, in every city and town across the country"
                                        class="img-cover">
                                </figure>

                                <div class="card-content">

                                    <h4 class="headline headline-4 card-title">
                                        <a href="#" class="link hover-2">Every day, in every city and town across the
                                            country</a>
                                    </h4>

                                    <div class="warpper">
                                        <p class="card-subtitle">15 mins read</p>

                                        <time class="publish-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>

                                </div>

                            </div>
                        </li>
                    </ul>
                </div>
                <!-- lastComments -->
                <div class="card aside-card">

                    <h3 class="headline headline-2 aside-title">
                        <span class="span">Last Comment</span>
                    </h3>

                    <ul class="comment-list">

                        <li>
                            <div class="comment-card">

                                <blockquote class="card-text">
                                    “ Gosh jaguar ostrich quail one excited dear hello and bound and the and bland moral
                                    misheard
                                    roadrunner “
                                </blockquote>

                                <div class="profile-card">
                                    <figure class="profile-banner img-holder">
                                        <img src="{% static 'images/author-6.png' %}" width="32" height="32"
                                            loading="lazy" alt="Jane Cooper">
                                    </figure>

                                    <div>
                                        <p class="card-title">Jane Cooper</p>

                                        <time class="card-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>
                                </div>

                            </div>
                        </li>

                        <li>
                            <div class="comment-card">

                                <blockquote class="card-text">
                                    “ Gosh jaguar ostrich quail one excited dear hello and bound and the and bland moral
                                    misheard
                                    roadrunner “
                                </blockquote>

                                <div class="profile-card">
                                    <figure class="profile-banner img-holder">
                                        <img src="{% static 'images/author-7.png' %}" width="32" height="32"
                                            loading="lazy" alt="Katen Doe">
                                    </figure>

                                    <div>
                                        <p class="card-title">Katen Doe</p>

                                        <time class="card-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>
                                </div>

                            </div>
                        </li>

                        <li>
                            <div class="comment-card">

                                <blockquote class="card-text">
                                    “ Gosh jaguar ostrich quail one excited dear hello and bound and the and bland moral
                                    misheard
                                    roadrunner “
                                </blockquote>

                                <div class="profile-card">
                                    <figure class="profile-banner img-holder">
                                        <img src="{% static 'images/author-8.png' %}" width="32" height="32"
                                            loading="lazy" alt="Barbara Cartland">
                                    </figure>

                                    <div>
                                        <p class="card-title">Barbara Cartland</p>

                                        <time class="card-date" datetime="2022-04-15">15 April 2022</time>
                                    </div>
                                </div>

                            </div>
                        </li>

                    </ul>

                </div>
                <!-- instaPublish -->
                <div class="card aside-card insta-card">

                    <a href="#" class="nav-logo">
                        MiBlog
                    </a>

                    <p class="card-text">
                        Follow us on instagram
                    </p>

                    <ul class="insta-list">

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-1.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-2.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-3.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-4.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-5.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>

                        <li>
                            <a href="#" class="insta-post img-holder" style="--width: 276; --height: 277;">
                                <img src="{% static 'images/insta-post-6.png' %}" width="276" height="277"
                                    loading="lazy" alt="insta post" class="img-cover">
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <!-- RecentPostSectionEnds -->

    <!-- Create Article Form -->
    <div id="publicar" class="crear-articulo-container">
        <h2>Crear nuevo artículo</h2>
        <form method="post" enctype="multipart/form-data" class="crear-articulo-form">
            {% csrf_token %}

            <div class="form-group">
                {{ form.titulo.label_tag }}
                {{ form.titulo }}
            </div>

            <div class="form-group">
                {{ form.contenido.label_tag }}
                {{ form.contenido }}
            </div>

            <div class="form-group">
                {{ form.imagen_portada.label_tag }}
                {{ form.imagen_portada }}
            </div>

            <div class="form-group">
                {{ form.categoria.label_tag }}
                {{ form.categoria }}
            </div>

            <div class="form-group">
                {{ form.nueva_categoria.label_tag }}
                {{ form.nueva_categoria }}
            </div>

            <button type="submit" class="btn-publicar">Publicar</button>
        </form>

    </div>
    <!-- Create Article Form Ends -->

</article>
{% endblock %}